<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Begriffel â€“ PRIM</title>

  <style>
    :root{
      --bg:#fff;
      --text:#111;
      --muted:#6b7280;
      --border:#e5e7eb;

      --green:#22c55e;
      --yellow:#eab308;
      --gray:#9ca3af;

      --radius:18px;
      --tile-radius:14px;
      --shadow: 0 20px 60px rgba(0,0,0,.12);

      /* Layout tuning */
      --maxWrap: 680px;

      /* Tile sizing (computed via JS) */
      --gap: 10px;
      --boardPad: 14px;
      --tileSize: 64px;
      --tileFont: 28px;

      /* Keyboard */
      --keyH: 44px;
      --keyGap: 8px;

      /* Extra spacing control */
      --stagePadY: 12px;
      --stagePadX: 12px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      overflow:hidden; /* no scroll */
    }

    /* ===== Main layout ===== */
    .stage{
      height:100dvh;
      padding:
        calc(var(--stagePadY) + env(safe-area-inset-top))
        calc(var(--stagePadX) + env(safe-area-inset-right))
        calc(var(--stagePadY) + env(safe-area-inset-bottom))
        calc(var(--stagePadX) + env(safe-area-inset-left));
      display:grid;
      place-items:center;
    }

    /* On desktop: don't force full height feeling; keep centered & contained */
    .wrap{
      width:min(var(--maxWrap), 100%);
      height:100%;
      max-height: 980px;
      display:grid;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
      justify-items:center;
      text-align:center;
      min-height: 0;
    }

    header{
      width:100%;
      display:grid;
      gap: 6px;
      justify-items:center;
    }
    h1{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
      line-height:1.1;
    }
    p{
      margin:0;
      color:var(--muted);
      font-size: 14px;
      line-height:1.25;
    }

    /* Game area holds board + status */
    .game{
      width:100%;
      display:grid;
      grid-template-rows: 1fr auto;
      gap: 10px;
      align-items:center;
      min-height: 0;
    }

    /* ===== Board ===== */
    .board{
      width:100%;
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding: var(--boardPad);
      background:#fff;
      display:grid;
      gap: var(--gap);
      align-content:center;
      justify-content:center;
      min-height: 0;
    }

    .row{
      display:grid;
      grid-template-columns: repeat(4, var(--tileSize));
      gap: var(--gap);
      justify-content:center;
    }

    .row.shake{
      animation: shake 380ms ease;
    }
    @keyframes shake{
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-8px); }
      80% { transform: translateX(8px); }
    }

    .tile{
      width: var(--tileSize);
      aspect-ratio: 1/1;
      perspective: 900px;
      border-radius: var(--tile-radius);
      user-select:none;
    }

    .tileInner{
      width:100%;
      height:100%;
      border:2px solid var(--border);
      border-radius: var(--tile-radius);
      display:grid;
      place-items:center;
      font-weight:900;
      font-size: var(--tileFont);
      letter-spacing:1px;
      text-transform:uppercase;
      background:#fff;
      transform-style: preserve-3d;
      transition: transform 520ms cubic-bezier(.2,.8,.2,1), border-color 140ms ease;
    }

    .tile.revealing .tileInner{ transform: rotateX(180deg); }

    .face{
      grid-area: 1 / 1;
      backface-visibility: hidden;
      width:100%;
      height:100%;
      display:grid;
      place-items:center;
      border-radius: var(--tile-radius);
    }
    .front{ background:#fff; color:var(--text); }
    .back{ transform: rotateX(180deg); color:#fff; }

    .tile.green .tileInner{ border-color: var(--green); }
    .tile.green .back{ background: var(--green); }

    .tile.yellow .tileInner{ border-color: var(--yellow); }
    .tile.yellow .back{ background: var(--yellow); color:#111; }

    .tile.gray .tileInner{ border-color: var(--gray); }
    .tile.gray .back{ background: var(--gray); }

    .tile.pop .tileInner{ transform: scale(1.03); }

    /* ===== Status ===== */
    .status{
      width:100%;
      display:grid;
      gap: 6px;
    }
    .msg{
      min-height: 18px;
      font-weight:800;
      font-size: 14px;
      color:#111;
    }
    .footer{
      font-size: 12px;
      color: var(--muted);
    }

    /* ===== Keyboard ===== */
    .kb{
      width:100%;
      display:grid;
      gap: var(--keyGap);
      user-select:none;
      -webkit-user-select:none;
      touch-action: manipulation;
      padding-bottom: env(safe-area-inset-bottom);
    }

    .kbRow{
      display:grid;
      gap: 6px;
    }
    .kbRow.first{ grid-template-columns: repeat(10, 1fr); }
    .kbRow.second{ grid-template-columns: repeat(9, 1fr); padding: 0 10px; }
    .kbRow.third{ grid-template-columns: 1.35fr repeat(7, 1fr) 1.35fr; }

    .key{
      border:1px solid var(--border);
      background:#f3f4f6;
      color:#111;
      border-radius: 12px;
      height: var(--keyH);
      display:grid;
      place-items:center;
      font-weight: 900;
      font-size: 14px;
      cursor:pointer;
      transition: transform 90ms ease, opacity 120ms ease;
    }
    .key:active{ transform: scale(.98); }
    .key.green{ background: var(--green); border-color: var(--green); color:#fff; }
    .key.yellow{ background: var(--yellow); border-color: var(--yellow); color:#111; }
    .key.gray{ background: var(--gray); border-color: var(--gray); color:#fff; }

    /* ===== Modal ===== */
    .modalOverlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 9999;
    }
    .modalOverlay.show{ display:flex; }
    .modal{
      width:min(520px, 100%);
      background:#fff;
      border-radius: 22px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 18px;
      text-align:center;
      display:grid;
      gap: 10px;
    }
    .modal h2{ margin:0; font-size: 20px; font-weight: 900; }
    .modal .sub{ margin:0; color: var(--muted); font-weight: 700; font-size: 14px; }
    .modal .word{ font-size: 26px; font-weight: 1000; letter-spacing: 2px; }
    .modal .btnRow{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 4px; }
    .modalBtn{
      padding: 14px 16px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 15px;
      cursor:pointer;
      border: 1px solid var(--border);
    }
    .btnLight{ background:#fff; color:#111; }
    .btnDark{ background:#111; color:#fff; }

    /* ===== DEVICE TUNING ===== */
    @media (max-width: 520px){
      :root{
        --gap: 9px;
        --boardPad: 12px;
        --keyH: 40px;
        --keyGap: 7px;
        --stagePadY: 10px;
        --stagePadX: 10px;
      }
      h1{ font-size: 20px; }
      p{ font-size: 13px; }
      .key{ font-size: 13px; border-radius: 11px; }
    }

    @media (min-width: 900px){
      :root{
        --maxWrap: 760px;
        --keyH: 48px;
        --stagePadY: 16px;
        --stagePadX: 16px;
      }
      h1{ font-size: 26px; }
      p{ font-size: 14px; }
      .wrap{
        /* feels more "desktop*
